<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>test</title>
        <script>
            // 题目1：返回执行结果是什么
            // setTimeout(function () {
            //     console.log("setTimeout");
            // }, 0);
            // async function async1() {
            //     console.log("async1 start");
            //     await async2();
            //     console.log("async1 end");
            // }
            // async function async2() {
            //     console.log("async2");
            // }
            // async1();
            // new Promise(function (resolve) {
            //     console.log("promise1");
            //     resolve();
            // }).then(function () {
            //     console.log("promise2");
            // });
            // console.log("script end");

            // 题目2
            // setTimeout(function () {
            //     console.log(1);
            // }, 0);
            // new Promise(function executor(resolve) {
            //     console.log(2);
            //     for (var i = 0; i < 10000; i++) {
            //         i == 9999 && resolve();
            //     }
            //     console.log(3);
            // }).then(function () {
            //     console.log(4);
            // });
            // console.log(5);

            // 题目3 then 中的参数 err 与catch 有什么区别
            // new Promise((resolve, reject) => {
            //     resove("ok");
            //     // reject('err')
            //     console.log("1");
            //     throw new Error("err");
            // })
            //     .then(
            //         (res) => {
            //             console.log("res:", res);
            //         },
            //         (err) => {
            //             console.log("err:", err);
            //         }
            //     )
            //     .catch(console.error);
            // 1. resolve 状态确定了,catch 就不会再捕获抛出的错误
            // 2. resolve 不会阻碍后面代码的执行，除非 return
            // 3. then 的第二个参数和 catch 都能捕获错误，区别在于 catch 对象的错误具有“冒泡”性质，会一直向后传递，直到被捕获。所以推荐 catch

            // 题目4
            new Promise((resolve, reject) => {
                resolve(2);
                new Promise((resolve, reject) => {
                    resolve(5);
                }).then((v) => console.log(v));
            }).then((v) => console.log(v));

            new Promise((resolve, reject) => {
                resolve(2);
                setTimeout(() => {
                    new Promise((resolve, reject) => {
                        resolve(5);
                    }).then((v) => console.log(v));
                });
            }).then((v) => console.log(v));
        </script>
    </head>

    <body></body>
</html>
