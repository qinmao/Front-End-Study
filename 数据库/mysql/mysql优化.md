# mysql 优化
## 查询有点慢语句如何优化？
* 查询分析语句：帮助你了解 SQL 语句的执行计划，有助于你分析查询效率低下的原因
* 语法：{ EXPLAIN | DESCRIBE | DESC }查询语句;
* 字段表示的含义
  - partition：表示查询访问的分区。
  - key：表示优化器最终决定使用的索引是什么。
  - key_len：表示优化器选择的索引字段按字节计算的长度。如果没有使用索引，这个值就是空
  - rows：表示为了得到查询结果，必须扫描多少行记录。
  - possible_key：表示 MySQL 可以通过哪些索引找到查询的结果记录
  - SIMPLE：表示简单查询，不包含子查询和联合查询。
* LIKE
  - WHERE字段 LIKE ‘aa%’，表示筛选出所有以“aa”开始的记录；
  - % 放在前面不可以利用索引，放后面可以
## 如何充分利用系统资源？
> MySQL 的配置文件中
* 调整系统参数 InnoDB_flush_log_at_trx_commit=2
  - 默认的值是 1 每次提交事务的时候，都把数据写入日志，并把日志写入磁盘（大并发的场景下，过于频繁的磁盘读写会导致 CPU 资源浪费）
  - 0 每隔 1 秒将数据写入日志，并将日志写入磁盘
  - 2 每次提交事务的时候都将数据写入日志，但是日志每间隔 1 秒写入磁盘。

* 调整系统参数 InnoDB_buffer_pool_size
  - InnoDB 存储引擎使用缓存来存储索引和数据。这个值越大，可以加载到缓存区的索引和数据量就越多，需要的磁盘读写就越少。
  - MySQL 服务器是数据库专属服务器，只用来运行 MySQL 数据库服务，内存也有 128G。于是我们把这个参数的值调整为 64G。这样一来，磁盘读写次数可以大幅降低，我们就可以充分利用内存，释放出一些 CPU 的资源

* 调整系统参数 InnoDB_buffer_pool_instances
  - 这个参数的意思是，将 InnoDB 的缓存区分成几个部分，这样一来，就可以提高系统的并行处理能力，因为可以允许多个进程同时处理不同部分的缓存区
  - 我们把 InnoDB_buffer_pool_instances 的值修改为 64，意思就是把 InnoDB 的缓存区分成 64 个分区，这样就可以同时有多个进程进行数据操作，CPU 的效率就高多了